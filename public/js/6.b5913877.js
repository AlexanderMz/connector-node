(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"543e":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return i}));var a=s("fe09");function r(e){a["a"].create({message:e.message,type:"success",progress:!0,textColor:"white",color:"teal",icon:"check",closeBtn:"close",position:"bottom-right"})}function i(e){a["a"].create({message:e.message,type:"negative",progress:!0,textColor:"white",color:"negative",closeBtn:"close",position:"bottom-right"})}},dba9:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"q-pa-sm"},[s("q-toolbar",[s("q-toolbar-title",[e._v("\n      Administración\n    ")]),s("q-space"),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"fas fa-user-plus"},on:{click:function(t){e.newUser=!0}}},[s("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("\n        Nuevo usuario\n      ")])],1)],1),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-5 col-md-5 col-sm-12 col-xs-12"},[s("q-card",{staticClass:"no-border no-border full-height"},[s("q-list",{},[s("q-item-label",{staticClass:"text-center q-pa-sm"},[s("q-input",{attrs:{dense:"",rounded:"",outlined:""},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"fas fa-search"}})]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),s("q-item-label",{staticClass:"text-center",attrs:{header:""}},[e._v(e._s(e.users.length)+" USUARIOS")]),s("q-separator"),e._l(e.userFilter,(function(t){return s("q-item",{key:t._id,staticStyle:{cursor:"pointer"},attrs:{clickable:""},on:{click:function(s){e.selected_user=t}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",[s("img",{attrs:{src:"img/user.jpg"}})])],1),s("q-item-section",[s("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.nombre))]),s("q-item-label",{attrs:{caption:"",lines:"2"}},[s("span",{staticClass:"text-weight-bold"},[e._v(e._s("ADMIN_ROLE"==t.role?"Administrador":"Usuario")+" | "+e._s(t.email))])])],1)],1)}))],2)],1)],1),s("div",{staticClass:"col-lg-7 q-pl-xs col-md-7 col-sm-12 col-xs-12"},[s("q-card",{staticClass:"no-border no-border",style:{height:e.size["height"]-24+"px !important"}},[s("q-toolbar",[s("q-btn",{staticClass:"q-pa-sm",attrs:{round:"",flat:""}},[s("q-avatar",{attrs:{size:"80px"}},[s("img",{attrs:{src:"img/user.jpg"}})])],1),s("q-item",{staticClass:"q-subtitle-1 q-pl-md"},[s("q-item-section",[s("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(e.selected_user.nombre))]),s("q-item-label",{attrs:{caption:"",lines:"2"}},[s("span",{staticClass:"text-weight-bold"},[e._v(e._s(e.selected_user.email))])])],1)],1),s("q-space"),s("q-btn",{attrs:{round:"",icon:"fas fa-user-minus",disable:!e.selected_user._id||e.user._id===e.selected_user._id},on:{click:function(t){return t.preventDefault(),e.eliminarUsuario(e.selected_user._id)}}},[s("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("\n              Borrar usuario\n            ")])],1),s("q-btn",{attrs:{round:"",icon:"edit",disable:!e.selected_user._id},on:{click:function(t){e.updateUser=!0}}},[s("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("\n              Editar usuario\n            ")])],1)],1),s("q-separator"),s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{avatar:"",top:""}},[s("q-avatar",{attrs:{icon:"article"}})],1),s("q-item-section",[s("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(e.selected_user.nombre))]),s("q-item-label",{staticClass:"text-grey-8",attrs:{caption:""}},[e._v("Nombre")])],1)],1),s("q-separator",{attrs:{inset:"item"}}),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}]},[s("q-item-section",{attrs:{avatar:"",top:""}},[s("q-avatar",{attrs:{icon:"mail"}})],1),s("q-item-section",[s("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(e.selected_user.email))]),s("q-item-label",{staticClass:"text-grey-8",attrs:{caption:""}},[e._v("Personal Email")])],1)],1),s("q-separator",{attrs:{inset:"item"}}),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}]},[s("q-item-section",{attrs:{avatar:"",top:""}},[s("q-avatar",{attrs:{icon:"supervisor_account"}})],1),s("q-item-section",[s("q-item-label",{attrs:{lines:"1"}},[e._v(e._s("ADMIN_ROLE"==e.selected_user.role?"Administrador":"Usuario"))]),s("q-item-label",{staticClass:"text-grey-8",attrs:{caption:""}},[e._v("Rol")])],1)],1),s("q-separator",{attrs:{inset:"item"}}),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}]},[s("q-item-section",{attrs:{avatar:"",top:""}},[s("q-avatar",{attrs:{icon:"fas fa-trash-alt"}})],1),s("q-item-section",[s("q-checkbox",{attrs:{dense:"",label:"Borrar archivos",disable:""},model:{value:e.selected_user.deletefiles,callback:function(t){e.$set(e.selected_user,"deletefiles",t)},expression:"selected_user.deletefiles"}})],1)],1),s("q-separator",{attrs:{inset:"item"}}),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}]},[s("q-item-section",{attrs:{avatar:"",top:""}},[s("q-avatar",{attrs:{icon:"fas fa-folder-minus"}})],1),s("q-item-section",[s("q-checkbox",{attrs:{dense:"",label:"Borrar carpetas",disable:""},model:{value:e.selected_user.deletefolder,callback:function(t){e.$set(e.selected_user,"deletefolder",t)},expression:"selected_user.deletefolder"}})],1)],1),s("q-separator",{attrs:{inset:"item"}}),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}]},[s("q-item-section",{attrs:{avatar:"",top:""}},[s("q-avatar",{attrs:{icon:"fas fa-folder-plus"}})],1),s("q-item-section",[s("q-checkbox",{attrs:{dense:"",label:"Crear carpetas",disable:""},model:{value:e.selected_user.createfolder,callback:function(t){e.$set(e.selected_user,"createfolder",t)},expression:"selected_user.createfolder"}})],1)],1)],1)],1)]),s("q-dialog",{attrs:{persistent:""},model:{value:e.newUser,callback:function(t){e.newUser=t},expression:"newUser"}},[s("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[s("q-form",{on:{submit:function(t){return t.preventDefault(),e.nuevoUsuario()}}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v("Nuevo usuario")]),s("div",{staticClass:"text-subtitle2"},[e._v("Formulario")])]),s("q-card-section",[s("q-input",{attrs:{dense:"",filled:"",outlined:"",placeholder:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"fas fa-quote-left"}})]},proxy:!0}]),model:{value:e.new_user.nombre,callback:function(t){e.$set(e.new_user,"nombre",t)},expression:"new_user.nombre"}}),s("q-input",{attrs:{dense:"",filled:"",outlined:"",placeholder:"Email",type:"email"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"fas fa-at"}})]},proxy:!0}]),model:{value:e.new_user.email,callback:function(t){e.$set(e.new_user,"email",t)},expression:"new_user.email"}}),s("q-input",{attrs:{dense:"",filled:"",outlined:"",placeholder:"Contraseña",type:"password"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"fas fa-key"}})]},proxy:!0}]),model:{value:e.new_user.password,callback:function(t){e.$set(e.new_user,"password",t)},expression:"new_user.password"}})],1),s("q-card-section",{staticClass:"table"},[s("div",{staticClass:"text-subtitle2 row"},[e._v("Permisos")]),s("div",{staticClass:"row"},[s("q-checkbox",{staticClass:"col-4",attrs:{dense:"",label:"Borrar carpetas"},model:{value:e.new_user.deletefolder,callback:function(t){e.$set(e.new_user,"deletefolder",t)},expression:"new_user.deletefolder"}}),s("q-checkbox",{staticClass:"col-4",attrs:{dense:"",label:"Borrar archivos"},model:{value:e.new_user.deletefiles,callback:function(t){e.$set(e.new_user,"deletefiles",t)},expression:"new_user.deletefiles"}}),s("q-checkbox",{staticClass:"col-4",attrs:{dense:"",label:"Crear directorios"},model:{value:e.new_user.createfolder,callback:function(t){e.$set(e.new_user,"createfolder",t)},expression:"new_user.createfolder"}})],1)]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",color:"primary",label:"Guardar",type:"submit"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"primary",round:"",icon:"fas fa-times"}})],1)],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:e.updateUser,callback:function(t){e.updateUser=t},expression:"updateUser"}},[s("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[s("q-form",{on:{submit:function(t){return t.preventDefault(),e.updateUsuario()}}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v("Actualizar usuario")]),s("div",{staticClass:"text-subtitle2"},[e._v("Formulario")])]),s("q-card-section",[s("q-input",{attrs:{dense:"",filled:"",outlined:"",placeholder:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"fas fa-quote-left"}})]},proxy:!0}]),model:{value:e.selected_user.nombre,callback:function(t){e.$set(e.selected_user,"nombre",t)},expression:"selected_user.nombre"}}),s("q-input",{attrs:{dense:"",filled:"",outlined:"",placeholder:"Email",type:"email",disable:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"fas fa-at"}})]},proxy:!0}]),model:{value:e.selected_user.email,callback:function(t){e.$set(e.selected_user,"email",t)},expression:"selected_user.email"}})],1),s("q-card-section",{staticClass:"table"},[s("div",{staticClass:"text-subtitle2 row"},[e._v("Permisos")]),s("div",{staticClass:"row"},[s("q-checkbox",{staticClass:"col-4",attrs:{dense:"",label:"Borrar carpetas"},model:{value:e.selected_user.deletefolder,callback:function(t){e.$set(e.selected_user,"deletefolder",t)},expression:"selected_user.deletefolder"}}),s("q-checkbox",{staticClass:"col-4",attrs:{dense:"",label:"Borrar archivos"},model:{value:e.selected_user.deletefiles,callback:function(t){e.$set(e.selected_user,"deletefiles",t)},expression:"selected_user.deletefiles"}}),s("q-checkbox",{staticClass:"col-4",attrs:{dense:"",label:"Crear directorios"},model:{value:e.selected_user.createfolder,callback:function(t){e.$set(e.selected_user,"createfolder",t)},expression:"selected_user.createfolder"}})],1)]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",color:"primary",label:"Actualizar",type:"submit"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"primary",round:"",icon:"fas fa-times"}})],1)],1)],1)],1),s("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[s("q-btn",{attrs:{dense:"",icon:"arrow_back",to:"/admin",label:"Regresar"}})],1)],1)},r=[],i=s("ded3"),l=s.n(i),o=s("543e"),n=s("2f62");let c=JSON.parse(localStorage.getItem("user"));var d={name:"UserAdmin",data(){return{user:c,selected_user:{},new_user:{nombre:"aLEXNADER",email:"",password:"",createfolder:!1,deletefolder:!1,deletefiles:!1},search:"",size:{},newUser:!1,updateUser:!1}},computed:l()(l()({},Object(n["c"])("usuario",["users"])),{},{userFilter(){return this.users.filter((e=>e.nombre.toLowerCase().includes(this.search.toLowerCase())||e.email.toLowerCase().includes(this.search.toLowerCase())))}}),mounted(){this.obtenerUsuarios()},methods:l()(l()({},Object(n["b"])("usuario",["obtenerUsuarios","crearUsuario","actualizarUsuario","borrarUsuario"])),{},{nuevoUsuario(){let e={nombre:this.new_user.nombre,email:this.new_user.email,password:this.new_user.password,createfolder:this.new_user.createfolder,deletefolder:this.new_user.deletefolder,deletefiles:this.new_user.deletefiles};this.crearUsuario(e).then((e=>{e&&(o["b"]({message:"Usuario creado correctamente"}),this.obtenerUsuarios(),this.newUser=!1)}))},updateUsuario(){let e={_id:this.selected_user._id,nombre:this.selected_user.nombre,createfolder:this.selected_user.createfolder,deletefolder:this.selected_user.deletefolder,deletefiles:this.selected_user.deletefiles};this.actualizarUsuario(e).then((e=>{e&&(o["b"]({message:"Usuario actualizado correctamente"}),this.obtenerUsuarios())}))},eliminarUsuario(e){this.$q.dialog({title:"Confirmar",message:`¿Esta seguro que desea borrar este usuario (${this.selected_user.nombre})?`,cancel:!0,color:"primary",persistent:!0}).onOk((()=>{this.borrarUsuario(e).then((e=>{e&&(o["b"]({message:"Usuario eliminado correctamente"}),this.selected_user={},this.obtenerUsuarios())}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}})},u=d,p=s("2877"),m=s("9989"),f=s("65c6"),b=s("6ac5"),q=s("2c91"),_=s("9c40"),v=s("05c0"),h=s("f09f"),w=s("1c1c"),x=s("0170"),g=s("27f9"),k=s("0016"),C=s("eb85"),y=s("66e5"),U=s("4074"),Q=s("cb32"),S=s("8f8e"),$=s("24e8"),N=s("0378"),A=s("a370"),B=s("4b7e"),E=s("de5e"),I=s("714f"),L=s("7f67"),O=s("eebe"),z=s.n(O),D=Object(p["a"])(u,a,r,!1,null,null,null);t["default"]=D.exports;z()(D,"components",{QPage:m["a"],QToolbar:f["a"],QToolbarTitle:b["a"],QSpace:q["a"],QBtn:_["a"],QTooltip:v["a"],QCard:h["a"],QList:w["a"],QItemLabel:x["a"],QInput:g["a"],QIcon:k["a"],QSeparator:C["a"],QItem:y["a"],QItemSection:U["a"],QAvatar:Q["a"],QCheckbox:S["a"],QDialog:$["a"],QForm:N["a"],QCardSection:A["a"],QCardActions:B["a"],QPageSticky:E["a"]}),z()(D,"directives",{Ripple:I["a"],ClosePopup:L["a"]})}}]);