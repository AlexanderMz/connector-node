(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"1d2d":function(e,t,a){"use strict";var s=a("53c1"),o=a.n(s);o.a},"53c1":function(e,t,a){},"543e":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return r}));var s=a("fe09");function o(e){s["a"].create({message:e.message,type:"success",progress:!0,textColor:"white",color:"teal",icon:"check",closeBtn:"close",position:"bottom-right"})}function r(e){s["a"].create({message:e.message,type:"negative",progress:!0,textColor:"white",color:"negative",closeBtn:"close",position:"bottom-right"})}},"8b24":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-toolbar",[a("q-icon",{attrs:{name:"fas fa-home",size:"20px"}}),e._v("\n    "+e._s(" /"+e.currentPath)+"\n    "),a("q-space"),a("q-form",{staticClass:"q-gutter-md",on:{submit:e.findByCriteria}},[a("q-input",{ref:"filter",attrs:{dense:"",rounded:"",outlined:"",placeholder:"Busqueda avanzada",loading:e.buscando,required:""},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"fas fa-search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("q-btn",{attrs:{icon:"fas fa-file-upload",round:""},on:{click:function(t){e.upload=!0}}},[a("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("\n        Cargar archivo\n      ")])],1),a("q-btn",{attrs:{icon:"fas fa-sync-alt",round:""},on:{click:function(t){return e.listFiles(void 0)}}},[a("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("\n        Actualizar vista\n      ")])],1)],1),a("hr"),a("div",{staticClass:"q-pa-md row items-start q-gutter-md"},e._l(e.files,(function(t){return a("div",{key:t.name},[a("file",{attrs:{data:t},on:{viewFile:function(a){return e.viewFile(t.fullpath)},delete:function(a){return e.deleteItemHandler(t._id)}}})],1)})),0),e.files.length?e._e():a("div",{staticClass:"no-files absolute-center text-center"},[a("q-icon",{attrs:{name:"announcement",size:"100px",color:"primary"}}),a("div",{staticClass:"text-h4 text-primary"},[e._v("\n      Sin archivos\n    ")])],1),a("q-dialog",{ref:"mediaContentDialog",attrs:{maximized:e.$q.screen.lt.md},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("q-card",{staticClass:"no-scroll",staticStyle:{"min-width":"80vw","min-height":"80vh"}},[a("q-bar",{staticClass:"bg-brand-light"},[a("h5",{staticClass:"text-brand-text"},[e._v("Visor de archivo")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",icon:"close"}})],1),a("q-pdfviewer",{attrs:{src:e.pdfSrc,type:"html5","content-class":"absolute shorten-pdf"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.upload,callback:function(t){e.upload=t},expression:"upload"}},[a("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Subir archivo")]),a("div",{staticClass:"text-italic"},[e._v("Destino: "+e._s(e.currentPath))])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-uploader",{staticClass:"full-width",attrs:{url:e.uploadUrl,label:"Seleccione archivos (PDF)",multiple:"",batch:"",accept:".pdf",headers:e.headerUpload},on:{finish:e.listFiles}})],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"primary",round:"",icon:"fas fa-times"}})],1)],1)],1),a("q-inner-loading",{attrs:{showing:e.visible}})],1)},o=[],r=(a("c975"),a("ded3")),i=a.n(r),n=a("2f62"),l=(a("2a19"),a("f508"),a("543e")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",{class:e.$q.platform.is.desktop?e.class_val:"my-card1",staticStyle:{cursor:"pointer"},on:{click:e.viewFile,mouseover:function(t){e.class_val="my-card shadow-10"},mouseleave:function(t){e.class_val="my-card shadow-"}}},[a("q-card-section",{staticClass:"flex flex-center",style:{fontSize:"60px"}},[a("q-icon",{attrs:{name:"fas fa-file-pdf"}})],1),a("q-separator"),a("q-card-section",{staticClass:"text-center"},[e._v("\n      Nombre\n      "),a("br"),a("strong",[e._v(e._s(e.file.name))]),a("br"),e._v("\n      Tamaño\n      "),a("strong",[e._v(e._s(e._f("formatBytes")(e.file.size)))])]),a("q-card-actions",[a("q-space"),a("q-btn",{attrs:{round:"",icon:"fas fa-trash-alt",disable:!e.user.deletefiles},on:{click:function(t){return t.stopPropagation(),e.deleteItem(t)}}},[a("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Borrar documento")])],1),a("q-space")],1)],1)],1)},d=[];let u=JSON.parse(localStorage.getItem("user"));var p={name:"ComponentFile",data(){return{file:{},class_val:"shadow-1 my-card",user:u}},props:["data"],mounted(){this.file=this.data},methods:{viewFile(){this.$emit("viewFile")},deleteItem(){this.$emit("delete")}},filters:{formatBytes(e,t=2){if(0===e)return"0 Bytes";const a=0>t?0:t,s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}}},f=p,m=a("2877"),h=a("f09f"),v=a("a370"),g=a("0016"),b=a("eb85"),q=a("4b7e"),w=a("2c91"),C=a("9c40"),y=a("05c0"),_=a("eebe"),x=a.n(_),S=Object(m["a"])(f,c,d,!1,null,null,null),Q=S.exports;x()(S,"components",{QCard:h["a"],QCardSection:v["a"],QIcon:g["a"],QSeparator:b["a"],QCardActions:q["a"],QSpace:w["a"],QBtn:C["a"],QTooltip:y["a"]});var F=a("db49");let B=JSON.parse(localStorage.getItem("user"));var I={name:"PageIndex",data(){return{splitterModel:25,selected:"",filter:"",show:!1,pdfSrc:"",upload:!1,visible:!1,buscando:!1,class_val:"shadow-1 my-card",uploadUrl:F["a"].url_upload,currentPath:(localStorage.getItem("path")||"").substring(5),user:B,texto:"Alex"}},components:{file:Q},beforeRouteEnter(e,t,a){var s=localStorage.getItem("path");a((e=>{e.listFiles(s)}))},computed:i()(i()({},Object(n["c"])("filemanager",["files"])),{},{headerUpload(){return[{name:"path",value:localStorage.getItem("path")}]}}),methods:i()(i()({},Object(n["b"])("filemanager",["getFiles","getFileContent","findByCriteria","deleteItem"])),{},{myFilterMethod(e,t){const a=t.toLowerCase();return e.label&&e.label.toLowerCase().indexOf(a)>-1},resetFilter(){this.filter="",this.$refs.filter.focus()},listFiles(e){this.visible=!0,setTimeout((()=>{e=void 0==e?localStorage.getItem("path"):e,this.getFiles(e),this.upload=!1,this.visible=!1}),1e3)},viewFile(e){this.getFileContent(e).then((e=>{this.pdfSrc=e,this.show=!0})).catch((e=>{l["b"]({message:"Error downloading PDF"})}))},deleteItemHandler(e){this.$q.dialog({title:"Confirmar",message:"¿Esta seguro que desea borrar este documento?",cancel:!0,color:"primary",persistent:!0}).onOk((()=>{this.deleteItem(e).then((e=>{e&&(this.listFiles(),l["b"]({message:"Documento borrado correctamente"}))}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},findByCriteria(){this.buscando=!0,setTimeout((()=>{localStorage.setItem("criteria",this.filter.toUpperCase()),this.buscando=!1,this.$router.push({name:"results"})}),2e3)}})},k=I,P=(a("1d2d"),a("9989")),O=a("65c6"),$=a("0378"),z=a("27f9"),D=a("24e8"),M=a("d847"),T=a("ee89"),E=a("74f7"),U=a("7f67"),N=Object(m["a"])(k,s,o,!1,null,"faf5eae0",null);t["default"]=N.exports;x()(N,"components",{QPage:P["a"],QToolbar:O["a"],QIcon:g["a"],QSpace:w["a"],QForm:$["a"],QInput:z["a"],QBtn:C["a"],QTooltip:y["a"],QDialog:D["a"],QCard:h["a"],QBar:M["a"],QCardSection:v["a"],QUploader:T["a"],QSeparator:b["a"],QCardActions:q["a"],QInnerLoading:E["a"]}),x()(N,"directives",{ClosePopup:U["a"]})}}]);